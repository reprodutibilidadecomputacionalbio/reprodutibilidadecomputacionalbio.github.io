{"version":1,"kind":"Article","sha256":"de5b259ecae0debec79fb2c914b94ab8d8d37317e8a1d0f8982749c239eb38d7","slug":"reproducible-research.renv.renv-virtualmachine","location":"/reproducible-research/renv/renv-virtualmachine.md","dependencies":[],"frontmatter":{"title":"Virtual Machines","content_includes_title":false,"authors":[{"nameParsed":{"literal":"The Turing Way Community","given":"The Turing Way","family":"Community"},"name":"The Turing Way Community","id":"contributors-myst-generated-uid-0"}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/the-turing-way/the-turing-way","copyright":"2019-2025","numbering":{"title":{"offset":2}},"edit_url":"https://github.com/the-turing-way/the-turing-way/blob/main/book/website/reproducible-research/renv/renv-virtualmachine.md","thumbnail":"/build/virtual-machine-24235e0b78e27e32b43510de6bdcf72b.jpg","exports":[{"format":"md","filename":"renv-virtualmachine.md","url":"/build/renv-virtualmachine-de7c1a679f5dfe01514e4b1aa216daf1.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"What are Virtual Machines?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Mx2YbMijTl"}],"label":"rr-renv-vm-what","identifier":"rr-renv-vm-what","html_id":"rr-renv-vm-what","key":"mDvrnEOrPz"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Virtual Machines (VMs) essentially package a whole computer as an app that can be run.\nAs an example, the figure below shows a windows laptop (note the windows search button in the lower-left corner) running a virtual ubuntu machine (note the terminal outputting the operating system).\nThe machine running the VM is called the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"nX6RHdD73o"},{"type":"inlineCode","value":"host machine","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vl6XAgtBgo"},{"type":"text","value":".","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"loRSQ6axXw"}],"key":"MIFwpUzm53"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Using software like ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KHmzC58Cgr"},{"type":"link","url":"https://www.virtualbox.org/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"VirtualBox","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"do9KIymGHy"}],"urlSource":"https://www.virtualbox.org/","key":"BUd8TKPuCN"},{"type":"text","value":" or ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Uf41yhdY5E"},{"type":"link","url":"https://www.vagrantup.com/","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Vagrant","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"iOH0f9E5ix"}],"urlSource":"https://www.vagrantup.com/","key":"QaRdFJLRJO"},{"type":"text","value":", a user can create and run any number of VMs.\nAs you could probably guess, having several VMs running at once can be a drain on memory.\nSo just because you can run several VMs does not mean you should.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GIXcGsx5Kd"}],"key":"XIvgX1XDsb"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/virtual-machine-24235e0b78e27e32b43510de6bdcf72b.jpg","alt":"A screenshot of a Virtual Machine.","urlSource":"../../../figures/virtual-machine.jpg","key":"tJT8yIkSGZ"}],"label":"virtual-machine","identifier":"virtual-machine","enumerator":"1","html_id":"virtual-machine","key":"HCJpRqvpIx"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Users can download, install, backup and destroy VMs at will, which is why they are an attractive tool for sharing reproducible research.\nResearch often requires specific pieces of software or system settings.\nIf a researcher wishes to reproduce another’s work on their computer, making the necessary changes to their environment to run the project may impact their work.\nFor example, in the ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"EXdO8mbTgy"},{"type":"crossReference","kind":"heading","identifier":"rr-renv-useful","label":"rr-renv-useful","children":[{"type":"text","value":"Motivation and Background","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"GPRzH3OLOr"}],"template":"{name}","resolved":true,"html_id":"rr-renv-useful","remote":true,"url":"/reproducible-research/renv","dataUrl":"/reproducible-research.renv.json","key":"GnH9H7gx4a"},{"type":"text","value":" section of this chapter, we described how using a different version of Python can lead to unexpected changes in the results of an analysis.\nSay a researcher installs an updated version of Python to replicate an analysis because the analysis requires features only present in the updated version.\nBy doing so, they put their own work at risk.\nVMs remove that risk; any tools downloaded or settings changed will only impact the VM, keeping the reproducer’s research safe.\nIf they do inadvertently break something in the VM, they can delete it and make another one.\nVMs are effectively a quarantined area.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"sEddodZstR"}],"key":"kAv7sEiGeO"},{"type":"heading","depth":2,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Using Virtual Machines for Reproducible Research","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"JLW13irq3p"}],"label":"rr-renv-vm-research","identifier":"rr-renv-vm-research","html_id":"rr-renv-vm-research","key":"XEH48xaWHV"},{"type":"paragraph","position":{"start":{"line":36,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"Virtual machines can be shared by exporting them as single files.\nAnother researcher can then import that file using their own virtualisation software like ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"s6IyeexqNt"},{"type":"link","url":"https://www.virtualbox.org/","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"VirtualBox","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"fvWpqYrAmM"}],"urlSource":"https://www.virtualbox.org/","key":"yh6KUGlDyj"},{"type":"text","value":" and open up a copy of the VM which will contain all the software files and settings put in place by the person that made the VM.\nTherefore in practice, they will have a working version of the project without the pain of setting it up themselves.","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"ZkDH6hFpvO"}],"key":"kOjikJIWYV"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"Setting up a Virtual Machine","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"pkWtlEnMYK"}],"label":"rr-renv-vm-research-settingup","identifier":"rr-renv-vm-research-settingup","html_id":"rr-renv-vm-research-settingup","key":"XIiJUjfSup"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"First, choose a tool for generating VMs.\nHere the widely-used ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"PAhRKNlUy9"},{"type":"link","url":"https://www.virtualbox.org/","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"VirtualBox","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"Mf9TgNU4Cd"}],"urlSource":"https://www.virtualbox.org/","key":"WlsBhmEKmv"},{"type":"text","value":" is chosen.\nDownload and install it on your system.\nTo create a new machine, click “New” in the top left.\nA window will pop up where you can enter a name for the machine and select what operating system (and version) to use.\nIn the figure below, a machine called ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"qj0HVewnrL"},{"type":"inlineCode","value":"demo_VM","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"skQuAqoTcP"},{"type":"text","value":" running Ubuntu is being created:","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"tcJX9xaW1S"}],"key":"WUGPjHgzsU"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/vm-create-machine-14baa2ec18408345ee52430b19948e90.png","alt":"A screenshot showing a Virtual Machine is created.","urlSource":"../../../figures/vm-create-machine.png","key":"o9Rew9Ewqb"}],"label":"vm-create-machine","identifier":"vm-create-machine","enumerator":"2","html_id":"vm-create-machine","key":"GGvcYdavVF"},{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"As you click through, you can adjust other features of the machine to be created, such as how much memory it should have access to.\nThe default options are suitable for most purposes, but this process permits customisation.","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"isMJOlXPUY"}],"key":"vVDRYOPl4j"},{"type":"heading","depth":3,"position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"Starting a Virtual Machine","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"wKIWj3oINq"}],"label":"rr-renv-vm-research-starting","identifier":"rr-renv-vm-research-starting","html_id":"rr-renv-vm-research-starting","key":"F5adAoFnKv"},{"type":"paragraph","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"text","value":"To start a virtual machine, select the machine from the list of VMs on the left, and click the green ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"r3sBFmSSi8"},{"type":"inlineCode","value":"Start","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"LuHH2cmvDn"},{"type":"text","value":" arrow at the top:","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"wpgXmH4DHl"}],"key":"nV5ChcbG3w"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/vm-start-machine-a19d9250a5cbf5d9400dab7652801dfd.png","alt":"A screenshot showing how to start a Virtual Machine.","urlSource":"../../../figures/vm-start-machine.png","key":"lxKleG5oh8"}],"label":"vm-start-machine","identifier":"vm-start-machine","enumerator":"3","html_id":"vm-start-machine","key":"BjpXRKQtir"},{"type":"heading","depth":3,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"Sharing Virtual Machines","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"IGhpf3NlGY"}],"label":"rr-renv-vm-research-sharing","identifier":"rr-renv-vm-research-sharing","html_id":"rr-renv-vm-research-sharing","key":"urdTByn1F1"},{"type":"paragraph","position":{"start":{"line":77,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"A researcher can do work on their VM, and then export it.\nTo export a VM, click ","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"pG5sJea3Sz"},{"type":"inlineCode","value":"File","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"Re3B57CXgD"},{"type":"text","value":" in the top left and then ","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"GcBbd4o3vQ"},{"type":"inlineCode","value":"Export","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"CWFNzNyS3H"},{"type":"text","value":".\nThis will export the VM as a single file which can be shared.","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"KAXfDZI0O1"}],"key":"nnGrPH6Byr"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/vm-export-machine-56a18e5fe5d5c17b206893651f3f01b7.png","alt":"A screenshot showing how to export a Virtual Machine.","urlSource":"../../../figures/vm-export-machine.png","key":"BPo56f9Tm3"}],"label":"vm-export-machine","identifier":"vm-export-machine","enumerator":"4","html_id":"vm-export-machine","key":"VNihQbWSLk"},{"type":"paragraph","position":{"start":{"line":89,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"Someone that has access to this file and VirtualBox installed just needs to click ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"KNb1Wawjhs"},{"type":"inlineCode","value":"File","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"y9JLuan3uZ"},{"type":"text","value":" in the top left, then ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"HIIwTzCDnb"},{"type":"inlineCode","value":"Import","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"qjm4YgJvRr"},{"type":"text","value":" to select that file.\nOnce it is imported, they can start the VM as described before, by selecting it from the menu clicking the green start arrow at the top.","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"waC6DHFymt"}],"key":"LZoWzCJm8b"},{"type":"heading","depth":2,"position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"text","value":"Declarative Virtual Machines with Vagrant","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"Rhx2ypZix6"}],"label":"rr-renv-vm-vagrant","identifier":"rr-renv-vm-vagrant","html_id":"rr-renv-vm-vagrant","key":"Ln4UaljJ0W"},{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"link","url":"https://www.vagrantup.com/","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"children":[{"type":"text","value":"Vagrant","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"gjHl0OdtwY"}],"urlSource":"https://www.vagrantup.com/","key":"T1tPrnKSZY"},{"type":"text","value":" is a tool which ","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"bYtjR320AD"},{"type":"emphasis","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"children":[{"type":"text","value":"“enables users to create and configure lightweight, reproducible, and portable development environments”","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"cy8klJN6tg"}],"key":"cQjcEahRp7"},{"type":"text","value":".\nIn this context, an environment is a virtual machine (its CPUs, RAM, networking and so on) and the machines state (operating system, packages).\nVagrant can set up virtual machines using text scripts, instead of pointing and clicking through a graphical user interface.\nThis makes it particularly useful for automating the process of setting up virtual machines and making that process reproducible.","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"nXD5peJvFF"}],"key":"lJeNvFviDp"},{"type":"heading","depth":3,"position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"How Vagrant Works","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"gslYlPmMCA"}],"label":"rr-renv-vm-vagrant-details","identifier":"rr-renv-vm-vagrant-details","html_id":"rr-renv-vm-vagrant-details","key":"acF3cCt9ly"},{"type":"paragraph","position":{"start":{"line":102,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"Unlike some other tools you may use to create or manage virtual machines, like ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"nXwe0oIs3T"},{"type":"link","url":"https://www.virtualbox.org/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"VirtualBox","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"O5BpC89SlH"}],"urlSource":"https://www.virtualbox.org/","key":"AHl8Pemjzp"},{"type":"text","value":" and ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"WzvDTk84zU"},{"type":"link","url":"https://www.qemu.org/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"QEMU","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"RgvH51FcWp"}],"urlSource":"https://www.qemu.org/","key":"pbXiOCvOmf"},{"type":"text","value":", Vagrant does not have its own hypervisor.\nInstead, Vagrant uses ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"YpRXqmCEz6"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/providers","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"providers","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"dUzp0Yfd5Y"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/providers","key":"DoZHVD50GC"},{"type":"text","value":" to interact with other virtualisation tools.\nVagrant has built in providers for ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"g2maAwhcIa"},{"type":"link","url":"https://www.virtualbox.org/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"VirtualBox","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"oGTvz4318K"}],"urlSource":"https://www.virtualbox.org/","key":"sZ48qXiKTJ"},{"type":"text","value":", ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"K8oBxkGeEM"},{"type":"link","url":"https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/about/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Hyper-V","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"bYlakIsyj2"}],"urlSource":"https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/about/","key":"mVSxawXm4V"},{"type":"text","value":" and ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"obAA5jtTBg"},{"type":"link","url":"https://www.docker.com/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Docker","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"yF474ZVCAS"}],"urlSource":"https://www.docker.com/","key":"jCZ0Di7q1J"},{"type":"text","value":".\nOther providers can be supported by plugins.\nIn particular, the Vagrant developers maintain an ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"ky9hxQHs0q"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/providers/vmware/installation","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"official plugin","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"bbPaAMvvIH"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/providers/vmware/installation","key":"XbCwmopFSM"},{"type":"text","value":" for ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"OvLnu4RgKw"},{"type":"link","url":"https://www.vmware.com/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"VMWare","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"oUBCphY2hW"}],"urlSource":"https://www.vmware.com/","key":"yzInAOpZ4s"},{"type":"text","value":".\nFor Linux users there is also a ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"via3Ze4FRE"},{"type":"link","url":"https://vagrant-libvirt.github.io/vagrant-libvirt/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"community supported provider","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"NX6M2WF8Ae"}],"urlSource":"https://vagrant-libvirt.github.io/vagrant-libvirt/","key":"Xgp1gLxRoi"},{"type":"text","value":" for ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"psESOyG2Cw"},{"type":"link","url":"https://libvirt.org/","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"libvirt","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"zreCfiXOJG"}],"urlSource":"https://libvirt.org/","key":"QA2WElPJxi"},{"type":"text","value":".","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"b4w8LwZ1HX"}],"key":"am3u2sjhWa"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"twsJSe40xo"}],"key":"oEWNDlTQBp"},{"type":"paragraph","position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"text","value":"A hypervisor is software which allows virtual machines to interact with host machines hardware at a low level.\n","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"LSqBiJI9se"},{"type":"link","url":"https://www.redhat.com/en/topics/virtualization/what-is-a-hypervisor","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"This","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"JYHhVX6O98"}],"urlSource":"https://www.redhat.com/en/topics/virtualization/what-is-a-hypervisor","key":"jG7QZGWnhk"},{"type":"text","value":" article from Red Hat gives a good overview.","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"CgpkPAYqZ4"}],"key":"OmsGoydSTg"}],"key":"KWeDv1ertS"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":116,"column":1}},"children":[{"type":"text","value":"Vagrant environments can be packed into ","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"Odk45WpgOt"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/boxes","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"boxes","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"pCFU7baF6J"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/boxes","key":"BHI1v9K87O"},{"type":"text","value":".\nWhen using Vagrant you will most likely start from an existing box and build your environment on top of it.\nYou can browse and search for public boxes ","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"Uy7PGCBWwY"},{"type":"link","url":"https://app.vagrantup.com/boxes/search","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"n75oRcJZ5t"}],"urlSource":"https://app.vagrantup.com/boxes/search","key":"jl2VsAbu77"},{"type":"text","value":".","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"wNikWTAyyd"}],"key":"eRWwt7btGq"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":120,"column":1}},"children":[{"type":"text","value":"After deploying a box, Vagrant can also use ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"nSxWASweSp"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/provisioning","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"provisioners","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"ELwzMYQuUC"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/provisioning","key":"mT9CF6MUHr"},{"type":"text","value":" to apply further configuration.\nThis is useful to adapt a generic box to a specific purpose, for example by installing packages.\nProvisioning can be as simple as a shell script but can also incorporate powerful configuration management tools like ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"Qf88n88FAk"},{"type":"link","url":"https://docs.ansible.com/ansible/latest/index.html","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Ansible","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"dz5dFkKPEp"}],"urlSource":"https://docs.ansible.com/ansible/latest/index.html","key":"osjE8ZdW0O"},{"type":"text","value":", ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"doweIH3GIv"},{"type":"link","url":"https://puppet.com/","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Puppet","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"IVh6iW9aUa"}],"urlSource":"https://puppet.com/","key":"Cw2QNx1MtV"},{"type":"text","value":" and ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"BloWJGwNrN"},{"type":"link","url":"https://www.chef.io/","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Chef","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"GmF6bk5kTw"}],"urlSource":"https://www.chef.io/","key":"Q7b94zDInB"},{"type":"text","value":".","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"YWTQMgVueg"}],"key":"lcQYcPSsUt"},{"type":"heading","depth":3,"position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"The Vagrantfile","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"ThqWnmhql9"}],"label":"rr-renv-vm-vagrant-vagrantfile","identifier":"rr-renv-vm-vagrant-vagrantfile","html_id":"rr-renv-vm-vagrant-vagrantfile","key":"l1yO1jEnp6"},{"type":"paragraph","position":{"start":{"line":125,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"With Vagrant, users can define the configuration of a virtual machine (or group of virtual machines) in a declarative configuration language stored in a Vagrantfile.\nThis configuration is written in the ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"xc3zOpCDD8"},{"type":"link","url":"https://www.ruby-lang.org/en/","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Ruby","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"tdel7UJEmb"}],"urlSource":"https://www.ruby-lang.org/en/","key":"e8eXUuQ3Rp"},{"type":"text","value":" programming language.\nHowever, it is not necessary to know Ruby as the syntax is simple and the ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"YmwjnBlhTl"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/vagrantfile","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"documentation","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"UMLUyJScJP"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/vagrantfile","key":"fPn2qN8iyH"},{"type":"text","value":" explains all of the available options.","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"wcVJcSGXcH"}],"key":"b5izRYNEPX"},{"type":"admonition","kind":"attention","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Attention","key":"t07Er5V9ea"}],"key":"Q30upxWhgy"},{"type":"paragraph","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"text","value":"For Vagrant to recognise a Vagrantfile file, it must be called ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"dep5nSj9SQ"},{"type":"inlineCode","value":"Vagrantfile","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"C71glmbPrU"},{"type":"text","value":".","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"XKycS3d4kk"}],"key":"E9Q1HiYe2K"}],"key":"XBjh91Y7oL"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Defining the virtual machines in plain text has a number of advantages over distributing full virtual machine images:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"bvaZxmqkxI"}],"key":"yWoqFq8OgQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"The files can be checked into version control","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"zR4H4BnLMN"}],"key":"mCxzFhcRvP"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"children":[{"type":"text","value":"Small size makes them fast and easy to share","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"EgNP8oMbxo"}],"key":"LHRWGNlldm"},{"type":"listItem","spread":true,"position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"Users can reproducibly build environments","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"l3Ty7B8NrV"}],"key":"OE9H8YLu3y"},{"type":"listItem","spread":true,"position":{"start":{"line":138,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"text","value":"A single definition can potentially work across multiple hypervisors (like VirtualBox, VMWare, libvirt)","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"GuiEE84Wul"}],"key":"lWcAp4bra6"}],"key":"rk6OyNRih2"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":141,"column":1}},"children":[{"type":"text","value":"In combination these qualities support Vagrant’s goals of lightweight, portable and reproducible environments.\nA project can maintain its development environment alongside the source code and every contributor can use the environment with minimal barriers.","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"EJCZlw3nWM"}],"key":"LsNLNIkRVM"},{"type":"heading","depth":3,"position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"children":[{"type":"text","value":"The Vagrant CLI","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"pIMDdY3uQj"}],"label":"rr-renv-vm-vagrant-cli","identifier":"rr-renv-vm-vagrant-cli","html_id":"rr-renv-vm-vagrant-cli","key":"zXT1eZMO0X"},{"type":"paragraph","position":{"start":{"line":146,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"You will most likely use vagrant through the command line interface (CLI).\nThe CLI can be used to:","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"lZsKv5aVcw"}],"key":"maG8RMGNsl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":153,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"text","value":"manage machines with commands like ","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"muWgC5nzSn"},{"type":"inlineCode","value":"vagrant up","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"Tn7rqTwDur"},{"type":"text","value":", ","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"H3OM834PiE"},{"type":"inlineCode","value":"vagrant halt","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"iVriYJJtoa"},{"type":"text","value":" and ","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"IUqR8u3E9c"},{"type":"inlineCode","value":"vagrant destroy","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"F1tW7frBT4"}],"key":"DefcdhTER3"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"connect to machines with ","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"Oyv5ruOVmR"},{"type":"inlineCode","value":"vagrant ssh","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"nfXOU6sS6h"},{"type":"text","value":" and ","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"xJR01NHdts"},{"type":"inlineCode","value":"vagrant powershell","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"tOyxEgmi9V"}],"key":"PWSBC62M84"},{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"text","value":"get, package and publish boxes","position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"key":"YVw2dPTrA8"}],"key":"luMj67JJZB"},{"type":"listItem","spread":true,"position":{"start":{"line":152,"column":1},"end":{"line":153,"column":1}},"children":[{"type":"text","value":"create minimal a Vagrantfile with ","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"uoQ2fcK7hb"},{"type":"inlineCode","value":"vagrant init","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"jBReKfTQlY"}],"key":"lMZ5P9S2PG"}],"key":"x34EVzFOv7"},{"type":"paragraph","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"text","value":"Full documentation for all commands can be found ","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"key":"VfmS3HvoHx"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/cli","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"key":"QFXAlpgm4N"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/cli","key":"vDutcu5wMI"},{"type":"text","value":".","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"key":"q8yTj0Ll1C"}],"key":"ko20jBtYX1"},{"type":"heading","depth":3,"position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"Syncing Data","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"key":"AYEnZyk2w1"}],"label":"rr-renv-vm-vagrant-sync","identifier":"rr-renv-vm-vagrant-sync","html_id":"rr-renv-vm-vagrant-sync","key":"fxXoWHJY2A"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"text","value":"Vagrant can help sharing data between the host and the virtual machine by syncing directories.\nBy default, the directory containing the Vagrantfile is mounted at ","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"ZBoRt2ft1O"},{"type":"inlineCode","value":"/vagrant","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"CqAmZSC7R1"},{"type":"text","value":" on the guest.\nTherefore, if you keep a Vagrantfile in the root of a git repository, when you use the Vagrant environment you will find your project at ","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"rO50QihOGf"},{"type":"inlineCode","value":"/vagrant","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"o6SWgFRGYU"},{"type":"text","value":".\nThis makes it convenient to develop, build and test your project within the environment.","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"kEQNfRge3S"}],"key":"FlbjvzSHdl"},{"type":"paragraph","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"Additional shared directories can be declared as explained in ","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"KKJMwSbAHm"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/docs/synced-folders/basic_usage","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"the documentation","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"eCVn4qNYJX"}],"urlSource":"https://developer.hashicorp.com/vagrant/docs/synced-folders/basic_usage","key":"SYngMXOmd4"},{"type":"text","value":".","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"RewJTHvq8t"}],"key":"pZnpz5moa7"},{"type":"admonition","kind":"attention","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Attention","key":"ybl1V8MS3k"}],"key":"MSzEKglYZN"},{"type":"paragraph","position":{"start":{"line":167,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"text","value":"Some boxes may not have any shared directories, so it is best to explicitly define any that you want in your Vagrantfile.\nIn particular, the ‘generic’ images built by ","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"P885g7J7go"},{"type":"link","url":"https://roboxes.org/","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Roboxes","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"S76L4obMla"}],"urlSource":"https://roboxes.org/","key":"hf01yFtjx0"},{"type":"text","value":" do not have any mounts by default.\nThese boxes are popular as they cover a wide variety of distributions and support a multiple hypervisors.","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"Nor5BM6Trc"}],"key":"czLE5pF3O7"}],"key":"m2s0C8BwM1"},{"type":"heading","depth":2,"position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"text","value":"A Virtual Machine for The Turing Way","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"Iv6kjFBK8I"}],"label":"rr-renv-vm-ttw","identifier":"rr-renv-vm-ttw","html_id":"rr-renv-vm-ttw","key":"S6geTB72bF"},{"type":"paragraph","position":{"start":{"line":175,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"Here we will walk through some important part of a Vagrantfile by designing an environment to build The Turing Way.\nBuilding the book this way might help keep your host system clean from build dependencies.\nIt could also help debug problems as multiple people can better ensure they are using the same environment to work on the book.","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"QNBTUW1QRV"}],"key":"PEmafNTP7L"},{"type":"heading","depth":3,"position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"text","value":"The Vagrantfile","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"sl6C3KTvn8"}],"label":"rr-renv-vm-ttw-vagrantfile","identifier":"rr-renv-vm-ttw-vagrantfile","html_id":"rr-renv-vm-ttw-vagrantfile","key":"l0hrMxVLz0"},{"type":"paragraph","position":{"start":{"line":182,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"You can find the ","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"liaDpO0y4o"},{"type":"link","url":"https://github.com/the-turing-way/the-turing-way/blob/main/Vagrantfile","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"text","value":"full Vagrantfile","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"awhJ550T6O"}],"urlSource":"https://github.com/the-turing-way/the-turing-way/blob/main/Vagrantfile","data":{"kind":"file","org":"the-turing-way","repo":"the-turing-way","reference":"main","file":"Vagrantfile","raw":"https://raw.githubusercontent.com/the-turing-way/the-turing-way/main/Vagrantfile"},"internal":false,"protocol":"github","key":"DBHgtw7PRO"},{"type":"text","value":" in the root of The Turing Way git repository.\nWe will then use some of the Vagrant CLI commands to provision the machine and use it to build the book.","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"NczaeMfxLY"}],"key":"fabBOHoOkX"},{"type":"paragraph","position":{"start":{"line":185,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"The top level block of the Vagrantfile specifies the Vagrant configuration version.\nThis will help maintain backwards compatibility if new versions are released.\nAll other configuration is contained within this block.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"zYdUb2VMkH"}],"key":"g0TJyPs6ZK"},{"type":"code","lang":"ruby","value":"Vagrant.configure(\"2\") do |config|\n  ...\nend","key":"KjS5TULjzd"},{"type":"paragraph","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"text","value":"Next the box to build our environment from is specified.","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"wZASyCDT3b"}],"key":"IXdI51HcYX"},{"type":"code","lang":"ruby","value":"  config.vm.box = \"generic/fedora36\"","key":"mwAUnxBnls"},{"type":"paragraph","position":{"start":{"line":201,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"text","value":"This is a box for version 36 of the ","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"OUB7KJ5G9U"},{"type":"link","url":"https://getfedora.org/en/workstation/","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"text","value":"Fedora Workstation Linux distribution","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"Pj6VvlkJLU"}],"urlSource":"https://getfedora.org/en/workstation/","key":"d9QnNcFIeV"},{"type":"text","value":".\nThe generic org creates boxes of many Linux distributions for multiple hypervisors.\nThis makes them useful for creating environments which can be run by users on different operating systems.","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"qN3RlTQp8c"}],"key":"iyRBbuAkkZ"},{"type":"paragraph","position":{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},"children":[{"type":"text","value":"The virtual machine’s hostname is defined, and The Turing Way project directory is mounted at ","position":{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},"key":"sf817b2mSM"},{"type":"inlineCode","value":"/vagrant","position":{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},"key":"hS3xfLuNrL"},{"type":"text","value":" inside the virtual machine.","position":{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},"key":"c0Vrr3VhEx"}],"key":"cCfji27Zq1"},{"type":"code","lang":"ruby","value":"  config.vm.hostname = 'theturingway'\n\n  config.vm.synced_folder \"./\", \"/vagrant\"","key":"RRDSN0toTK"},{"type":"paragraph","position":{"start":{"line":213,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"text","value":"The number of virtual CPUs and amount of memory are set in provider specific blocks.\nIn this example two virtual CPUs and 2048MB of RAM are allocated for the VirtualBox and libvirt providers.","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"Z2xriWKrQw"}],"key":"B5331hIqa7"},{"type":"paragraph","position":{"start":{"line":216,"column":1},"end":{"line":218,"column":1}},"children":[{"type":"text","value":"Provider specific overrides can also be specified in provider blocks.\nIn this example the synced directory settings are changed for libvirt to improve NFS compatibility.\nNFS is the default method to sync folders for libvirt.","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"CsoE0hbDT8"}],"key":"cVgXuaV8xC"},{"type":"code","lang":"ruby","value":"  config.vm.provider \"virtualbox\" do |vb|\n    vb.cpus = 2\n    vb.memory = 2048\n  end\n\n  config.vm.provider \"libvirt\" do |lv, override|\n    lv.cpus = 2\n    lv.memory = 2048\n\n    override.vm.synced_folder \"./\", \"/vagrant\", nfs_udp: false\n  end","key":"FGk04jv6g3"},{"type":"paragraph","position":{"start":{"line":234,"column":1},"end":{"line":236,"column":1}},"children":[{"type":"text","value":"The shell provisioner is used to install the packages necessary to build the book.\nFirst a script is defined to install pip, then use pip to install the python requirements as explained in the ","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"OjeDY40L8S"},{"type":"link","url":"https://github.com/the-turing-way/the-turing-way/blob/main/book/README.md","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"children":[{"type":"text","value":"book README","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"ObV4h6Pupo"}],"urlSource":"https://github.com/the-turing-way/the-turing-way/blob/main/book/README.md","data":{"kind":"file","org":"the-turing-way","repo":"the-turing-way","reference":"main","file":"book/README.md","raw":"https://raw.githubusercontent.com/the-turing-way/the-turing-way/main/book/README.md"},"internal":false,"protocol":"github","key":"QqXpasZYv0"},{"type":"text","value":".\nThe script is then passed to the provisioner.","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"BvvVhBpZwQ"}],"key":"grTep2JE91"},{"type":"code","lang":"ruby","value":"  $script = <<-'SCRIPT'\n  dnf install -y python3-pip\n  sudo -u vagrant pip install --no-warn-script-location -r /vagrant/book/dependencies.lock\n  SCRIPT\n\n  config.vm.provision \"shell\", inline: $script","key":"mj4oCh1yHq"},{"type":"heading","depth":3,"position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"children":[{"type":"text","value":"Building the book","position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"key":"pbfdOzMpJa"}],"label":"rr-renv-vm-ttw-build","identifier":"rr-renv-vm-ttw-build","html_id":"rr-renv-vm-ttw-build","key":"R1ePUMlRTk"},{"type":"paragraph","position":{"start":{"line":250,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"text","value":"Here we will show how to use The Turing Way Vagrant machine to build the book.\nFirst you will need to make sure you have ","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"dQSNOQPoQS"},{"type":"link","url":"https://developer.hashicorp.com/vagrant/tutorials/getting-started/getting-started-install","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"text","value":"installed Vagrant","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"mcZTDx5ASp"}],"urlSource":"https://developer.hashicorp.com/vagrant/tutorials/getting-started/getting-started-install","key":"qx0DPOVEKh"},{"type":"text","value":" and a compatible provider.\n","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"PBHns1jOQq"},{"type":"link","url":"https://www.virtualbox.org/","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"text","value":"VirtualBox","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"av0Q1BMmDw"}],"urlSource":"https://www.virtualbox.org/","key":"PyMF6OzUM8"},{"type":"text","value":" will probably be the easiest provider to use as it is supported on Linux, MacOS and Windows.\nWindows users can also try ","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"wcnhZneseK"},{"type":"link","url":"https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"text","value":"Hyper-V","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"XKlqVmTtU9"}],"urlSource":"https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v","key":"PX0TVbXYHV"},{"type":"text","value":", which is included in some editions of Windows 10 and Windows 11.","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"LffgH3aSpj"}],"key":"y708vl17yK"},{"type":"paragraph","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"text","value":"If you haven’t already, clone The Turing Way repository and change to the projects root directory.","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"n4z8hWHTsa"}],"key":"rebDVOeWoc"},{"type":"code","lang":"console","value":"$ git clone https://github.com/the-turing-way/the-turing-way.git\n$ cd the-turing-way","key":"OKKgCAwFoB"},{"type":"paragraph","position":{"start":{"line":262,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"text","value":"Now create the virtual machine.\nThe output will show Vagrant creating the machine as well as the provisioner script installing the build dependencies.\nWindows users can modify this command to ","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"KBD0LqmDkA"},{"type":"inlineCode","value":"vagrant up --provider hyperv","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"fzu8FCazZf"},{"type":"text","value":" to use Hyper-V.","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"WL31JjIMKh"}],"key":"nDOpMdeIk4"},{"type":"code","lang":"console","value":"$ vagrant up","key":"jod0pqaegl"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":271,"column":1}},"children":[{"type":"text","value":"You can now connect to the machine with SSH.\nVagrant has a convenient wrapper to make this simple.","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"OuyweSdqEn"}],"key":"hcyKH5Y2TR"},{"type":"code","lang":"console","value":"$ vagrant ssh","key":"aERRMIqshq"},{"type":"paragraph","position":{"start":{"line":277,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"text","value":"The project directory has been mounted at ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ODwPqWbkzR"},{"type":"inlineCode","value":"/vagrant","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"OzBrAXccr1"},{"type":"text","value":" on the guest.\nWe can change to the ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"aSH6FFoFDY"},{"type":"inlineCode","value":"book/website","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"nrscbFN0Fy"},{"type":"text","value":" directory and build the book like in the ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"eUOUb1HCef"},{"type":"link","url":"https://github.com/the-turing-way/the-turing-way/blob/main/book/README.md","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"text","value":"README","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"XQv1Xtw3wP"}],"urlSource":"https://github.com/the-turing-way/the-turing-way/blob/main/book/README.md","data":{"kind":"file","org":"the-turing-way","repo":"the-turing-way","reference":"main","file":"book/README.md","raw":"https://raw.githubusercontent.com/the-turing-way/the-turing-way/main/book/README.md"},"internal":false,"protocol":"github","key":"LfkDr4jF7y"},{"type":"text","value":".","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ECaIF1rh2y"}],"key":"Ec5LXgSW36"},{"type":"code","lang":"console","value":"[vagrant@theturingway ~]$ cd /vagrant/book/website/\n[vagrant@theturingway website]$ jupyter-book build .","key":"awB5XQ82LZ"},{"type":"paragraph","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"children":[{"type":"text","value":"As the directory is shared with the host system, you will be able to see the built book on your computer and view it in your browser.","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"fGn6lqLBZV"}],"key":"TM6P8eaVU0"},{"type":"paragraph","position":{"start":{"line":287,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"text","value":"When you are done you can exit the virtual machine, and halt it.\nYou can also destroy the virtual machine to clean up all storage associated with it.","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"Kp9BkmhT2j"}],"key":"NCzbiWYtdI"},{"type":"code","lang":"console","value":"[vagrant@theturingway ~]$ exit\n$ vagrant halt\n$ vagrant destroy","key":"x3DraMuLbX"}],"key":"XRYsUHF9w6"}],"key":"T4HOwtp6an"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"YAML","url":"/reproducible-research/renv/renv-yaml","group":"The Turing Way"},"next":{"title":"Containers","url":"/reproducible-research/renv/renv-containers","group":"The Turing Way"}}},"domain":"http://localhost:3001"}