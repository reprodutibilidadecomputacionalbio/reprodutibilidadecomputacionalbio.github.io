{"version":1,"kind":"Article","sha256":"6e1090df0d9b7bf8f850d8fd1bdf0dd94d89b0a6c83ec5c3f1a675bd2fa0a69c","slug":"reproducible-research.ci.ci-building-gh-actions","location":"/reproducible-research/ci/ci-building-gh-actions.md","dependencies":[],"frontmatter":{"title":"Building a Block of a Github Actions","content_includes_title":false,"authors":[{"nameParsed":{"literal":"The Turing Way Community","given":"The Turing Way","family":"Community"},"name":"The Turing Way Community","id":"contributors-myst-generated-uid-0"}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/the-turing-way/the-turing-way","copyright":"2019-2025","numbering":{"title":{"offset":2}},"edit_url":"https://github.com/the-turing-way/the-turing-way/blob/main/book/website/reproducible-research/ci/ci-building-gh-actions.md","exports":[{"format":"md","filename":"ci-building-gh-actions.md","url":"/build/ci-building-gh-actio-af990011be261809bf9cabfebbbff28f.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"As described previously, workflow files use YAML syntax, which has either a ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"GZ2U3x8t5G"},{"type":"inlineCode","value":".yml","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zq0DGGLWFQ"},{"type":"text","value":" or ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tfEXjQZ32i"},{"type":"inlineCode","value":".yaml","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tydNOTYWg3"},{"type":"text","value":" file extension.\nIf you’re new to YAML and want to learn more, ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uqh6m2OdOF"},{"type":"link","kind":"ref","identifier":"rr-renv-yaml","label":"rr-renv-yaml","children":[{"type":"text","value":"see our section about YMAL","key":"KVRAUEUi89"}],"url":"/reproducible-research/renv/renv-yaml","internal":true,"dataUrl":"/reproducible-research.renv.renv-yaml.json","key":"CJw7avD0EN"},{"type":"text","value":".\nThis workflow files must be stored in the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"s3IyueHrVu"},{"type":"inlineCode","value":".github/workflows","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qfpHfIEPDW"},{"type":"text","value":" directory of your repository.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZpoGA09TKu"}],"key":"IPE7DqpFTB"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Each workflow is defined in a separate YAML. We will introduce the building block of a workflow using Hello World Example:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"brL3d1FIc9"}],"key":"dJztYbOCJ2"},{"type":"code","lang":"","value":"name:\n    Hello World package\non:\n  push:\n    branches: [ main ]\nJobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3","position":{"start":{"line":10,"column":1},"end":{"line":21,"column":1}},"key":"lDMmf1ZC3l"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"strong","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"1. name","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"iKtcF9P33E"}],"key":"yiyER9mOB3"}],"key":"dgRqeZB6YI"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"This is the name of the workflow and it is optional. GitHub will use this name to be displayed on the repository’s actions page.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"mjRai0Tfq7"}],"key":"ssKDnclQyQ"},{"type":"code","lang":"","value":"name:\n    Hello World package","position":{"start":{"line":26,"column":1},"end":{"line":29,"column":1}},"key":"mDDFSJBjHR"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"2. on","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"Lnb6NfQplF"}],"key":"yNRCrgETES"}],"key":"BBUZmNNXCO"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"BlSNV3asy4"},{"type":"inlineCode","value":"on","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"lh9qyqnP5I"},{"type":"text","value":" field tells GHA when to run. For example, we can run the workflow anytime there’s a ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"nlJKPvZdzQ"},{"type":"inlineCode","value":"push","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"OoiqgQ75ZT"},{"type":"text","value":" or a ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"lFkM9Me5u4"},{"type":"inlineCode","value":"pull","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"wyRQxkk5OV"},{"type":"text","value":" on the ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"idcLXQEo38"},{"type":"inlineCode","value":"main","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"gVUkVlVeRe"},{"type":"text","value":" branch.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"rLxWP0sOjh"}],"key":"gU1MPP3qRA"},{"type":"code","lang":"","value":"on:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]","position":{"start":{"line":34,"column":1},"end":{"line":40,"column":1}},"key":"RndrrYRMjT"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"There are many events which can be used to trigger a workflow. You can explore them ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"x6GPukyTgL"},{"type":"link","url":"https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"yTcZZZjwEk"}],"urlSource":"https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions","key":"NBbUZSnQ8X"},{"type":"text","value":".","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"MIMin2MkDU"}],"key":"LysH6Ibmlc"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"strong","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"3. jobs and steps","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"toQVfuXyI8"}],"key":"stUjWPIuse"}],"key":"bYFNeJKadE"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"This block defines the core component of an Action workflow. Workflows are made of ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"OuEWbojA5s"},{"type":"inlineCode","value":"jobs","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"EBMbKrWlq9"},{"type":"text","value":".\nEvery job also needs a specific host machine on which to run, the ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"yaLCpIEpav"},{"type":"inlineCode","value":"runs-on:","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"VvaniuSuYj"},{"type":"text","value":" field is how we specify it.\nThe template workflow is running the ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"nyKikHB1gG"},{"type":"inlineCode","value":"build","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"rq4VHlpezW"},{"type":"text","value":" job in the latest version of Ubuntu, a Linux-based operating system.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"WaUU4DlgUm"}],"key":"RB3dKPYNJt"},{"type":"code","lang":"","value":"jobs:\n  build:\n  runs-on: ubuntu-latest","position":{"start":{"line":49,"column":1},"end":{"line":53,"column":1}},"key":"mCAZ5dAkSN"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"We can also separate the ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"iiIVZsRxxw"},{"type":"inlineCode","value":"build","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"GyZdDWKpxX"},{"type":"text","value":" and ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"zOzfhY5veD"},{"type":"inlineCode","value":"test","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"Gdp1fI9o1d"},{"type":"text","value":" functions of our workflow into more than one job that will run when our workflow is triggered. Jobs are made of ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"uUoNuj582T"},{"type":"inlineCode","value":"steps","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"n6FwplhbOi"},{"type":"text","value":".\nThese allow you define what to run in each job.\nThere are three ways to define steps.","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"AM0Y8HInjk"}],"key":"kfT9Ieyws7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":59,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"With ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"Ofjvw2PeJA"},{"type":"inlineCode","value":"uses","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"HKlGzTl6CE"}],"key":"ZviLKiLPhp"},{"type":"listItem","spread":true,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"With ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"temSGedCzJ"},{"type":"inlineCode","value":"run","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"AmKnrTz8dJ"}],"key":"HVAn4y4n62"},{"type":"listItem","spread":true,"position":{"start":{"line":61,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"With ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"cwJjUOxbml"},{"type":"inlineCode","value":"name","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"zyinopVP4q"}],"key":"ZO01ZUreRP"}],"key":"uuWz76zKXC"},{"type":"code","lang":"","value":"\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n  test:\n    steps:\n    - name: npm install\n      run: |\n        npm install\n        npm test","position":{"start":{"line":63,"column":1},"end":{"line":76,"column":1}},"key":"CUCUJw2p2o"},{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"The most basic action is ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"ewrS4pG7UX"},{"type":"inlineCode","value":"actions/checkout@v3","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"pbkw3SkcYi"},{"type":"text","value":".\nThis uses a GitHub provided action called ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"AHaP8Fmm47"},{"type":"link","url":"https://github.com/actions/checkout","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"inlineCode","value":"checkout","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"HuE7heuk0g"}],"urlSource":"https://github.com/actions/checkout","error":true,"key":"n3pfCJ78qh"},{"type":"text","value":" to allow the workflow to access the contents of the repository.\nAll the steps of a job run sequentially on the runner associated with the job.\nBy default, if a step fails, the subsequent steps of the job are skipped. Each run keyword represents a new process and shell in the runner environment.\nWhen you provide multi-line commands, each line runs in the same shell.","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"mwxkNGuO7k"}],"key":"S91Pk56npW"},{"type":"paragraph","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"Providing a comprehensive guide of all the available options is beyond the scope of this overview, and instead, we would urge you to study ","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"IG4U475Qe9"},{"type":"link","url":"https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"official reference documentation","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"tNVJ4aPSVB"}],"urlSource":"https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions","key":"TBUK1tM6vf"},{"type":"text","value":" and/or the CI configuration open-source projects references in the previous section.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"TvQWHPGNNL"}],"key":"UBK5CjLd67"}],"key":"WaNaZm5Aj8"}],"key":"jUVipJywAX"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Continuous Integration with GitHub Actions","url":"/reproducible-research/ci/ci-github-actions","group":"The Turing Way"},"next":{"title":"Best Practices and Recommendations","url":"/reproducible-research/ci/ci-practices","group":"The Turing Way"}}},"domain":"http://localhost:3000"}