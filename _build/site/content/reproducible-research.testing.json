{"version":1,"kind":"Article","sha256":"de2b7e5e1afe935b9b09e96a29d48b58e5e54e0cd60b67df30364668caf35405","slug":"reproducible-research.testing","location":"/reproducible-research/testing.md","dependencies":[],"frontmatter":{"title":"Code Testing","content_includes_title":false,"authors":[{"nameParsed":{"literal":"The Turing Way Community","given":"The Turing Way","family":"Community"},"name":"The Turing Way Community","id":"contributors-myst-generated-uid-0"}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/the-turing-way/the-turing-way","copyright":"2019-2025","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/the-turing-way/the-turing-way/blob/main/book/website/reproducible-research/testing.md","thumbnail":"/testing-motivation1-622d3c9eef8a269f72cfbd444e8e4da0.png","exports":[{"format":"md","filename":"testing.md","url":"/testing-0a15ca59ad1db94a7f1910d4818bac9d.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"table","position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Prerequisite","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"rSqTxFXUog"}],"key":"IEKbq5mZe0"},{"type":"tableCell","header":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qC78rahKlR"}],"key":"rGMswuCYjB"}],"key":"ff2Y23f44q"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"crossReference","kind":"heading","identifier":"rr-overview-resources-commandline","label":"rr-overview-resources-commandline","children":[{"type":"text","value":"Experience with the command line","key":"JcZNIBlQAp"}],"template":"{name}","resolved":true,"html_id":"rr-overview-resources-commandline","remote":true,"url":"/reproducible-research/overview/overview-resources","dataUrl":"/reproducible-research.overview.overview-resources.json","key":"Zob2sIA3z5"}],"key":"z5shG99GfZ"},{"type":"tableCell","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TWzq0vW0QN"}],"key":"Bu4wbjo7OB"}],"key":"aOqi6hTyuK"}],"key":"MzounZtn1G"},{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"aElKrPqoUe"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"ub42ZyZ0m7"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Researcher-written code now forms a part of a huge portion of research, and if there are mistakes in the code the results may be partly or entirely unreliable.\nTesting code thoroughly and frequently is vital to ensure reliable, reproducible research.\nThis chapter will provide general guidance for writing tests and describe a number of different kinds of testing, their uses and how to go about implementing them.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"v3fii38Uw8"}],"key":"wAAtpmB7EB"},{"type":"heading","depth":2,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Motivation and Background","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"uMUYpMzcpn"}],"identifier":"motivation-and-background","label":"Motivation and Background","html_id":"motivation-and-background","implicit":true,"key":"vxEpsuhXdN"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"It is very, very easy to make mistakes when coding.\nA single misplaced character can cause a program’s output to be entirely wrong.\nOne of the examples above was caused by a plus sign which should have been a minus.\nAnother was caused by one piece of code working in meters while a piece of code written by another researcher worked in feet.\n","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"jQYCXQ5uUJ"},{"type":"emphasis","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Everyone","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"tki6oCb7DT"}],"key":"nmpGXTC7hi"},{"type":"text","value":" makes mistakes, and in research the results can be catastrophic.\nCareers can be damaged/ended, vast sums of research funds can be wasted, and valuable time may be lost to exploring incorrect avenues. This is why tests are vital.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"tebxX2JqiJ"}],"key":"wPEYrRXmPu"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Here’s a couple of illustrations exemplifying of why should write tests:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Wiu3wxLGqx"}],"key":"Nf9TVnDU5t"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/testing-motivation1-622d3c9eef8a269f72cfbd444e8e4da0.png","alt":"Headline of a December 2006 news article by Greg Miller, published in Science, titled A Scientist's Nightmare: Software Problem Leads to Five Retractions","urlSource":"../../figures/testing-motivation1.png","key":"OA6nSj2MIb"}],"label":"testing-motivation1","identifier":"testing-motivation1","enumerator":"1","html_id":"testing-motivation1","key":"DNzMxqbxTZ"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/testing-motivation2-ad3204ee33074fce8ff06b2aeab2d18a.png","alt":"News article by Lisa Grossman, published on Wired.com in November 2010, describing an inconsistency between the units of force expected as output and input of two pieces of software that resulted in the loss of a weather satellite when it reached its destination at Mars. The piece is titled November 10, 1999: Metric Math Mistake Muffed Mars Meteorology Mission","urlSource":"../../figures/testing-motivation2.png","key":"bvJT7AcUbR"}],"label":"testing-motivation2","identifier":"testing-motivation2","enumerator":"2","html_id":"testing-motivation2","key":"VVSw5QabeU"},{"type":"paragraph","position":{"start":{"line":39,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"Even if problems in a program are caught before research is published it can be difficult to figure out what results are contaminated and must be re-done.\nThis represents a huge loss of time and effort.\nCatching these problems as early as possible minimises the amount of work it takes to fix them, and for most researchers time is by far their most scarce resource.\nYou should not skip writing tests because you are short on time, you should write tests ","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"twouyp7JVu"},{"type":"emphasis","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"because","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"zicVn2Je2w"}],"key":"FlFIfrBhid"},{"type":"text","value":" you are short on time.\nResearchers cannot afford to have months or years of work go down the drain, and they can’t afford to repeatedly manually check every little detail of a program that might be hundreds or hundreds of thousands of lines long.\nWriting tests to do it for you is the time-saving option, and it’s the safe option.","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"cD0xK4tZYY"}],"key":"AKWtf392Oq"},{"type":"paragraph","position":{"start":{"line":46,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"As researchers write code they generally do some tests as they go along, often by adding in print statements and checking the output.\nHowever, these tests are often thrown away as soon as they pass and are no longer present to check what they were intended to check.\nIt is comparatively very little work to place these tests in functions and keep them so they can be run at any time in the future.\nThe additional labour is minimal, the time saved and safeguards provided are invaluable.\nFurther, by formalising the testing process into a suite of tests that can be run independently and automatically, you provide a much greater degree of confidence that the software behaves correctly and increase the likelihood that defects will be found.","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"KRQIKISihZ"}],"key":"LwXlbiOmBU"},{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"Testing also affords researchers much more peace of mind when working on/improving a project.\nAfter changing their code a researcher will want to check that their changes or fixes have not broken anything.\nProviding researchers with a fail-fast environment allows the rapid identification of failures introduced by changes to the code.\nThe alternative, of the researcher writing and running whatever small tests they have time for is far inferior to a good testing suite which can thoroughly check the code.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"bwz6NCOQ0r"}],"key":"MIRY4VBWJW"},{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"Another benefit of writing tests is that it typically forces a researcher to write cleaner, more modular code as such code is far easier to write tests for, leading to an improvement in code quality.\n","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"At51sde60O"},{"type":"link","kind":"ref","identifier":"rr-code-quality","label":"rr-code-quality","children":[{"type":"text","value":"Good quality code","key":"u7HiPexJ6b"}],"url":"/reproducible-research/code-quality","internal":true,"dataUrl":"/reproducible-research.code-quality.json","key":"rDIUhnlsDD"},{"type":"text","value":" is far easier (and altogether more pleasant) to work with than tangled rat’s nests of code I’m sure we’ve all come across (and, let’s be honest, written). This point is expanded upon in the section ","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"QPpyy41bLu"},{"type":"link","kind":"ref","identifier":"rr-testing-unittest","label":"rr-testing-unittest","url":"/reproducible-research/testing/testing-unittest","internal":true,"dataUrl":"/reproducible-research.testing.testing-unittest.json","children":[{"type":"text","value":"Unit Testing","key":"C1PFiUiTyE"}],"key":"jecE7iIK1o"},{"type":"text","value":".","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"c33DlICnPb"}],"key":"azyibN4Tf3"},{"type":"heading","depth":2,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"The advantages of testing for research","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"kVViA3Tacd"}],"identifier":"the-advantages-of-testing-for-research","label":"The advantages of testing for research","html_id":"the-advantages-of-testing-for-research","implicit":true,"key":"Atec33Zyn4"},{"type":"paragraph","position":{"start":{"line":62,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"text","value":"As well as advantaging individual researchers testing also benefits research as a whole.\nIt makes research more reproducible by answering the question “how do we even know this code works”.\nIf tests are never saved, just done and deleted the proof cannot be reproduced easily.","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"ESY4IdmL1K"}],"key":"Z5wRfoana7"},{"type":"paragraph","position":{"start":{"line":66,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Testing also helps prevent valuable grant money being spent on projects that may be partly or wholly flawed due to mistakes in the code.\nWorse, if mistakes are not at found and the work is published, any subsequent work that builds upon the project will be similarly flawed.","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"CccXKgtoPY"}],"key":"Xnyb6Vd7lu"},{"type":"paragraph","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"Perhaps the cleanest expression of why testing is important for research as a whole can be found in the ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"GNRzGO22NR"},{"type":"link","url":"https://www.software.ac.uk/","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"Software Sustainability Institute","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"US33YeB4Yo"}],"urlSource":"https://www.software.ac.uk/","key":"B8k7O5aF0F"},{"type":"text","value":" slogan: better software, better research.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"kF0cxz79Z4"}],"key":"fnlP6P9VJl"}],"key":"oCIaLold89"}],"key":"itKO4nxRN6"},"references":{"cite":{"order":[],"data":{}}}}