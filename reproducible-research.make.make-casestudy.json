{"version":1,"kind":"Article","sha256":"ffe50d6ec045257ba2464899b0464a3d09a03e28a7b7cd14eabb11aa4aca23c7","slug":"reproducible-research.make.make-casestudy","location":"/reproducible-research/make/make-casestudy.md","dependencies":[],"frontmatter":{"title":"Case Study: Reproducible Paper using Make","content_includes_title":false,"authors":[{"nameParsed":{"literal":"The Turing Way Community","given":"The Turing Way","family":"Community"},"name":"The Turing Way Community","id":"contributors-myst-generated-uid-0"}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/the-turing-way/the-turing-way","copyright":"2019-2025","numbering":{"title":{"offset":2}},"edit_url":"https://github.com/the-turing-way/the-turing-way/blob/main/book/website/reproducible-research/make/make-casestudy.md","exports":[{"format":"md","filename":"make-casestudy.md","url":"/build/make-casestudy-152a6a15b1b2294d7770cee73599ecd0.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In the tutorial above we used IMDB movie ratings for different genres as\nexample data. This data was obtained from a dataset ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"vKIH4WjQUj"},{"type":"link","url":"https://www.kaggle.com/orgesleka/imdbmovies#imdb.csv","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"shared on\nKaggle","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mWHumMxDpM"}],"urlSource":"https://www.kaggle.com/orgesleka/imdbmovies#imdb.csv","key":"hwCh1h2le6"},{"type":"text","value":" as a CSV file.\nThe file looks like this:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"PUVXdFVCtD"}],"key":"iRy3JDu1ms"},{"type":"code","lang":"text","value":"fn,tid,title,wordsInTitle,url,imdbRating,ratingCount,duration,year,type,nrOfWins,nrOfNominations,nrOfPhotos,nrOfNewsArticles,nrOfUserReviews,nrOfGenre,Action,Adult,Adventure,Animation,Biography,Comedy,Crime,Documentary,Drama,Family,Fantasy,FilmNoir,GameShow,History,Horror,Music,Musical,Mystery,News,RealityTV,Romance,SciFi,Short,Sport,TalkShow,Thriller,War,Western\ntitles01/tt0012349,tt0012349,Der Vagabund und das Kind (1921),der vagabund und das kind,http://www.imdb.com/title/tt0012349/,8.4,40550,3240,1921,video.movie,1,0,19,96,85,3,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\ntitles01/tt0015864,tt0015864,Goldrausch (1925),goldrausch,http://www.imdb.com/title/tt0015864/,8.3,45319,5700,1925,video.movie,2,1,35,110,122,3,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\ntitles01/tt0017136,tt0017136,Metropolis (1927),metropolis,http://www.imdb.com/title/tt0017136/,8.4,81007,9180,1927,video.movie,3,4,67,428,376,2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0\ntitles01/tt0017925,tt0017925,Der General (1926),der general,http://www.imdb.com/title/tt0017925/,8.3,37521,6420,1926,video.movie,1,1,53,123,219,3,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0","position":{"start":{"line":9,"column":1},"end":{"line":15,"column":1}},"key":"c0AZ5k7hGS"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"While on the surface this looks like a regular CSV file, when you try to open\nit with the Python CSV library, or Pandas, or R’s ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Cl7Phol9PH"},{"type":"inlineCode","value":"read_csv","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"obf3VMvQ6s"},{"type":"text","value":", or even\n","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Qo3dDe3lme"},{"type":"inlineCode","value":"readr:read_csv","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fxFihgD0Rj"},{"type":"text","value":", the data is not loaded correctly. This happens because the\nCSV file uses an escape character ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"b77gAc4j69"},{"type":"inlineCode","value":"\\","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"gd9Z8yAgcU"},{"type":"text","value":" for movie names that have commas in\nthem and the CSV readers don’t automatically detect this variation in the CSV\nformat.  It turns out that this is quite a common issue for data scientists:\nCSV files are often messy and use an uncommon ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"V8vXCLkB8K"},{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"dialect","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"bN4Ffp3FWc"}],"key":"YI3BkEoJK8"},{"type":"text","value":": such as strange delimiters and\nuncommon quote characters.  Collectively, data scientists waste quite\nsome time on these data wrangling issues where manual intervention is needed.\nBut this problem is also not that easy to solve: to a computer a CSV file is\nsimply a long string of characters and every dialect will give you ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"n66749DfAQ"},{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"some","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fQYj2N8sgn"}],"key":"Z4IwLzKOCj"},{"type":"text","value":"\ntable, so how do we determine the dialect accurately in general?","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"XR3TPzsaJH"}],"key":"XDpl6ZTutH"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Recently, researchers from the Alan Turing Institute have presented a method\nthat achieves 97% accuracy on a large corpus of CSV files, with an improvement\nof 21% over existing approaches on non-standard CSV files. This research was\nmade reproducible through the use of Make and is available through an online\nrepository:\n","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"xzmXzuCDLb"},{"type":"link","url":"https://github.com/alan-turing-institute/CSV_Wrangling","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"https://​github​.com​/alan​-turing​-institute​/CSV​_Wrangling","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"tloRue1NMW"}],"urlSource":"https://github.com/alan-turing-institute/CSV_Wrangling","error":true,"key":"TWcjpwdpaH"},{"type":"text","value":".","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"QiysFQL96f"}],"key":"NXdrWvgymv"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Below we will briefly describe what the Makefile for such a project looks\nlike.  For the complete file, please see the repository. The Makefile consists\nof several sections:","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"iBxPvAiPk3"}],"key":"SgHgEIxa2x"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":41,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Data collection: because the data is collected from public sources, the\nrepository contains a Python script that allows anyone to download the data\nthrough a simple ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"aI8EIND94V"},{"type":"inlineCode","value":"make data","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"vsFHQjJDJL"},{"type":"text","value":" command.","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"tMAvFujBIm"}],"key":"tpJMp1EfwI"}],"key":"QQSApVsG78"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"All the figures, tables, and constants used in the paper are generated\nbased on the results from the experiments. To make it easy to recreate all\nresults of a certain type, ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"ZZFQ9Er7IK"},{"type":"inlineCode","value":".PHONY","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"B1gY8e1aUC"},{"type":"text","value":" targets are included that depend on\nall results of that type (so you could run ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"zrbX0SLylU"},{"type":"inlineCode","value":"make figures","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"goOyi85mOu"},{"type":"text","value":"). The rules for\nthese outputs follow the same pattern as those for the figures in the\ntutorial above.  Tables are created as LaTeX files so they can be directly\nincluded in the LaTeX source for the manuscript.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"ypTEU9khh6"}],"key":"VweZuD99ME"}],"key":"FWUPCxNrBe"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"The rules for the detection results follow a specific signature:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"m4UyrxJ6y1"}],"key":"NZOkH9bQDZ"},{"type":"code","lang":"makefile","value":"$(OUT_DETECT)/out_sniffer_%.json: $(OUT_PREPROCESS)/all_files_%.txt\n\tpython $(SCRIPT_DIR)/run_detector.py sniffer $(DETECTOR_OPTS) $< $@","position":{"start":{"line":55,"column":1},"end":{"line":58,"column":1}},"key":"oSdKsTBla8"},{"type":"paragraph","position":{"start":{"line":60,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"OxJTmKtuEl"},{"type":"inlineCode","value":"%","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"SIoL5nNlIM"},{"type":"text","value":" symbol is used to create outputs for both sources of CSV files\nwith a single rule in ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"QXkb0nE2T1"},{"type":"crossReference","kind":"heading","identifier":"rr-make-examples-patternrules","label":"rr-make-examples-patternrules","children":[{"type":"text","value":"Pattern Rules","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"BW1e5loKME"}],"template":"{name}","resolved":true,"html_id":"rr-make-examples-patternrules","remote":true,"url":"/reproducible-research/make/make-examples","dataUrl":"/reproducible-research.make.make-examples.json","key":"m1JFDRprOx"},{"type":"text","value":" and the rule\nuses in ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"wVI6I5XlB1"},{"type":"crossReference","kind":"heading","identifier":"rr-make-examples-automaticvar","label":"rr-make-examples-automaticvar","children":[{"type":"text","value":"Automatic Variables.","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"Bl4Pf5iqQM"}],"template":"{name}","resolved":true,"html_id":"rr-make-examples-automaticvar","remote":true,"url":"/reproducible-research/make/make-examples","dataUrl":"/reproducible-research.make.make-examples.json","key":"SNX97KVGy1"},{"type":"text","value":" to extract the input and\noutput filenames.","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"pwsiqKAvpX"}],"key":"jOGCHgJERH"}],"key":"IXZJznExmf"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Some of the cleaning rules will remove output files that take a while to\ncreate.  Therefore, these depend on a special ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Ip9NE7cAfy"},{"type":"inlineCode","value":"check_clean","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"C9T8hkgFUX"},{"type":"text","value":" target that\nasks the user to confirm before proceeding:","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"zpy1XiYve0"}],"key":"tWnypWpyjS"},{"type":"code","lang":"makefile","value":"check_clean:\n\t@echo -n \"Are you sure? [y/N]\" && read ans && [ $$ans == y ]","position":{"start":{"line":69,"column":1},"end":{"line":72,"column":1}},"key":"d0n7LnrRhs"}],"key":"NcEnNk4OQX"}],"key":"XQul4XBe0D"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"It is important to emphasize that this file was not created in one go, but was\nconstructed iteratively. The Makefile started as a way to run several dialect\ndetection methods on a collection of input files and gradually grew to include\nthe creation of figures and tables from the result files. Thus the advice for\nusing Make for reproducibility is to ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"OldGilgZO1"},{"type":"emphasis","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"start small and start early","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"rsf4WpewVC"}],"key":"p7yFhZA23P"},{"type":"text","value":".","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"paDhdNRlUm"}],"key":"GMuv9kj9KE"},{"type":"paragraph","position":{"start":{"line":80,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"The published Makefile in the repository does not contain the paper, but this\n","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"ErklyfvhBK"},{"type":"emphasis","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"is","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"gVAmRyfrrO"}],"key":"ymaaHeva8O"},{"type":"text","value":" included in the internal Makefile and follows the same structure as the\n","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"yJQvhLE1Kd"},{"type":"inlineCode","value":"report.pdf","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"Bn278iO9H2"},{"type":"text","value":" file in the tutorial above. This proved especially useful for\ncollaboration as only a single repository needed to be shared that contains\nthe code, the results, and the manuscript.","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"Gl17eiPTrd"}],"key":"RTeMcBfhxT"}],"key":"EkspgmCNkS"}],"key":"KYOvqTCtCH"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Debugging Makefiles","url":"/reproducible-research/make/make-debugging","group":"The Turing Way"},"next":{"title":"Including numerical results and tables","url":"/reproducible-research/make/make-results","group":"The Turing Way"}}},"domain":"http://localhost:3001"}